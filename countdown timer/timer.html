<!DOCTYPE html>
<html>
<head>
	<title>Timer</title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100">
	<link rel="stylesheet" type="text/css" href="assets/css/bulma.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/timer.css">
</head>
<body>
	<section class="hero is-primary is-bold">
		<div class="hero-body">
			<div class="container has-text-centered">
				<h1 class="title">Simple countdown</h1>
			</div>
		</div>
	</section>

	<section class="section">
		<div class="container">
			<div class="level timer-container" id="timerContainer">
				<div class="level-item">
					<span class="counter major" style="margin-left: 0;">0</span>
				</div>
				<div class="level-item">
					<span class="counter minor">0</span>
					<span class="marker">h</span>
				</div>
				<div class="level-item">
					<span class="counter major">0</span>
				</div>
				<div class="level-item">
					<span class="counter minor">0</span>
					<span class="marker">m</span>
				</div>
				<div class="level-item">
					<span class="counter major">0</span>
				</div>
				<div class="level-item">
					<span class="counter minor">0</span>
					<span class="marker">s</span>
				</div>
			</div>
		</div>
	</section>
	<!-- <div class="container is-fullwidth">
		<div class="input-container" id="timers">
			<span id="major-hours-counter" class="time-counter">0</span><span id="minor-hours-counter" class="time-counter">0</span>
			<span class="time-marker">h</span>
			<span id="major-minutes-counter" class="time-counter">0</span><span id="minor-minutes-counter" class="time-counter">0</span>
			<span class="time-marker">m</span>
			<span id="major-seconds-counter" class="time-counter">0</span><span id="minor-seconds-counter" class="time-counter">0</span>
			<span class="time-marker">s</span>
		</div>
		<div class="button-container">
			<button id="startButton">Start</button>
			<button id="resetButton">Reset</button>
			<input type="text" class="timer-input" id="timeInput" name="timer-input">
		</div>
	</div> -->

	<script type="text/javascript">

		window.onload = function () {
			var timerContainer = document.getElementById('timerContainer');
			var timeInput = document.getElementById('timeInput');
			var timers = document.getElementsByClassName('counters');
			var markers = document.getElementsByClassName('time-marker');

			timerContainer.addEventListener('click', function () {
				Array.prototype.forEach.call(timers, function(timer) {
					timer.classList.add('unsure');
				});
				Array.prototype.forEach.call(markers, function(marker) {
					marker.classList.add('unsure');
				});
				timers[5].classList.add('pointer');

				timeInput.focus();
			});


			timeInput.addEventListener('keydown', function (event) {
				var char = event.key;
				var charCode = event.which;

				if(charCode >= 48 && charCode <= 57) {
					for(var i = 0; i < 5; i ++) {
						timers[i].innerHTML = timers[i + 1].innerHTML;
					}
					timers[5].innerHTML = char;
				}
			});

			var minorSeconds = document.getElementById('minor-seconds-counter');
			var majorSeconds = document.getElementById('major-seconds-counter');
			var minorMinutes = document.getElementById('minor-minutes-counter');
			var majorMinutes = document.getElementById('major-minutes-counter');
			var minorHours = document.getElementById('minor-hours-counter');
			var majorHours = document.getElementById('major-hours-counter');

			var startButton = document.getElementById('startButton');

			startButton.addEventListener('click', startTimer);

			var countdownInterval;

			function startTimer () {
				countdownInterval = setInterval(function () {
					decrementSecondsMinor();
				}, 1000)
			};

			var decrementSecondsMinor = function () {
				var secondsValue = parseInt(minorSeconds.innerHTML);
					console.log(secondsValue);

				if(secondsValue == 0) {
					decrementSecondsMajor();
					minorSeconds.innerHTML = "9";
				} else {
					minorSeconds.innerHTML = secondsValue - 1;
				}
			}

			var decrementSecondsMajor = function () {
				var secondsValue = parseInt(majorSeconds.innerHTML);

				if(secondsValue == 0) {
					decrementMinutesMinor();
					majorSeconds.innerHTML = "5";
				} else {
					majorSeconds.innerHTML = secondsValue - 1;
				}
			}

			var decrementMinutesMinor = function () {
				var minutesValue = parseInt(minorMinutes.innerHTML);

				if(minutesValue == 0) {
					decrementMinutesMajor();
					minorMinutes.innerHTML = "9";
				} else {
					minorMinutes.innerHTML = minutesValue - 1;
				}
			}

			var decrementMinutesMajor = function () {
				var minutesValue = parseInt(majorMinutes.innerHTML);

				if(minutesValue == 0) {
					decrementHoursMinor();
					majorMinutes.innerHTML = "5";
				} else {
					majorMinutes.innerHTML = minutesValue - 1;
				}
			}

			var decrementHoursMinor = function () {
				var hoursValue = parseInt(minorHours.innerHTML);

				if(hoursValue == 0) {
					decrementHoursMajor();
					hoursValue.innerHTML = "9";
				} else {
					minorHours.innerHTML = hoursValue - 1;
				}
			}

			var decrementHoursMajor = function () {
				var hoursValue = parseInt(majorHours.innerHTML);

				if(hoursValue == 0) {
					alert('Countdown complete');
					clearInterval(countdownInterval);
				} else {
					majorHours.innerHTML = hoursValue - 1;
				}
			}
		}
	</script>
</body>
</html>