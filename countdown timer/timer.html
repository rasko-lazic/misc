<!DOCTYPE html>
<html>
<head>
	<title>Timer</title>
	<link rel="stylesheet" type="text/css" href="assets/css/bulma.min.css">
	<style type="text/css">
		@import url('https://fonts.googleapis.com/css?family=Lato:100');

		.container {
			display: flex;
			align-items: center;
			justify-content: center;
			font-family: 'Lato', sans-serif;
		}

		.input-container {
			cursor: pointer;
		}

		.unsure {
			color: #D3D3D3;
		}

		.time-counter {
			font-size: 160px;
		}

		.time-marker {
			font-size: 96px;
			font-weight: 500;
			margin-right: 20px;
		}

		.button-container {
			align-self: flex-end;
		}

		.timer-input {
			position: absolute;
			top: 0;
			left: 0;
			border: none;
			color: white;
		}

		.timer-input:focus {
			outline: none;
		}

		.pointer {
			border-right: solid 1px black;
		}

		#startButton {
			height: 40px;
			width: 400px;
		}

		#resetButton {

		}
	</style>
</head>
<body>
	<div class="container is-fullwidth">
		<div class="input-container" id="timers">
			<span id="major-hours-counter" class="time-counter">0</span><span id="minor-hours-counter" class="time-counter">0</span>
			<span class="time-marker">h</span>
			<span id="major-minutes-counter" class="time-counter">0</span><span id="minor-minutes-counter" class="time-counter">0</span>
			<span class="time-marker">m</span>
			<span id="major-seconds-counter" class="time-counter">0</span><span id="minor-seconds-counter" class="time-counter">0</span>
			<span class="time-marker">s</span>
		</div>
		<div class="button-container">
			<button id="startButton">Start</button>
			<button id="resetButton">Reset</button>
			<input type="text" class="timer-input" id="timeInput" name="timer-input">
		</div>
	</div>

	<script type="text/javascript">

		window.onload = function () {
			var timerContainer = document.getElementById('timers');
			var timeInput = document.getElementById('timeInput');
			var timers = document.getElementsByClassName('time-counter');
			var markers = document.getElementsByClassName('time-marker');

			timerContainer.addEventListener('click', function () {
				Array.prototype.forEach.call(timers, function(timer) {
					timer.classList.add('unsure');
				});
				Array.prototype.forEach.call(markers, function(marker) {
					marker.classList.add('unsure');
				});
				timers[5].classList.add('pointer');

				timeInput.focus();
			});


			timeInput.addEventListener('keydown', function (event) {
				var char = event.key;
				var charCode = event.which;

				if(charCode >= 48 && charCode <= 57) {
					for(var i = 0; i < 5; i ++) {
						timers[i].innerHTML = timers[i + 1].innerHTML;
					}
					timers[5].innerHTML = char;
				}
			});

			var minorSeconds = document.getElementById('minor-seconds-counter');
			var majorSeconds = document.getElementById('major-seconds-counter');
			var minorMinutes = document.getElementById('minor-minutes-counter');
			var majorMinutes = document.getElementById('major-minutes-counter');
			var minorHours = document.getElementById('minor-hours-counter');
			var majorHours = document.getElementById('major-hours-counter');

			var startButton = document.getElementById('startButton');

			startButton.addEventListener('click', startTimer);

			var countdownInterval;

			function startTimer () {
				countdownInterval = setInterval(function () {
					decrementSecondsMinor();
				}, 1000)
			};

			var decrementSecondsMinor = function () {
				var secondsValue = parseInt(minorSeconds.innerHTML);
					console.log(secondsValue);

				if(secondsValue == 0) {
					decrementSecondsMajor();
					minorSeconds.innerHTML = "9";
				} else {
					minorSeconds.innerHTML = secondsValue - 1;
				}
			}

			var decrementSecondsMajor = function () {
				var secondsValue = parseInt(majorSeconds.innerHTML);

				if(secondsValue == 0) {
					decrementMinutesMinor();
					majorSeconds.innerHTML = "5";
				} else {
					majorSeconds.innerHTML = secondsValue - 1;
				}
			}

			var decrementMinutesMinor = function () {
				var minutesValue = parseInt(minorMinutes.innerHTML);

				if(minutesValue == 0) {
					decrementMinutesMajor();
					minorMinutes.innerHTML = "9";
				} else {
					minorMinutes.innerHTML = minutesValue - 1;
				}
			}

			var decrementMinutesMajor = function () {
				var minutesValue = parseInt(majorMinutes.innerHTML);

				if(minutesValue == 0) {
					decrementHoursMinor();
					majorMinutes.innerHTML = "5";
				} else {
					majorMinutes.innerHTML = minutesValue - 1;
				}
			}

			var decrementHoursMinor = function () {
				var hoursValue = parseInt(minorHours.innerHTML);

				if(hoursValue == 0) {
					decrementHoursMajor();
					hoursValue.innerHTML = "9";
				} else {
					minorHours.innerHTML = hoursValue - 1;
				}
			}

			var decrementHoursMajor = function () {
				var hoursValue = parseInt(majorHours.innerHTML);

				if(hoursValue == 0) {
					alert('Countdown complete');
					clearInterval(countdownInterval);
				} else {
					majorHours.innerHTML = hoursValue - 1;
				}
			}
		}
	</script>
</body>
</html>